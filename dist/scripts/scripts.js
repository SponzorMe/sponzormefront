!function(){"use strict";angular.module("sponzorme",["pascalprecht.translate","ngResource","ngRoute","ngDialog","base64","ngCookies","ngStorage","google.places","angularSpinner","angularUtils.directives.dirPagination","firebase","textAngular","angular-input-stars","luegg.directives","ngMaterial","ngAria","ngAnimate","ngMessages"])}();
!function(){"use strict";angular.module("sponzorme").constant("DEFAULTLANG","en").constant("DEMOSTEPS",4).constant("MAXPERKLIMIT",200).constant("MAXAGE",100).constant("MINAGE",16).constant("SPONZORSHIPSTATUSES",["pending","accepted","save","paid","payment in process"]).constant("EXPIRATIONTIME",1)}();
!function(){"use strict";angular.module("sponzorme").config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"langs/lang-",suffix:".json"}),e.useSanitizeValueStrategy("escaped"),e.preferredLanguage("en"),e.fallbackLanguage("en")}]).config(["$localStorageProvider",function(e){e.setKeyPrefix("QkeMJxG7-")}])}();
!function(){"use strict";angular.module("sponzorme").config(["$routeProvider",function(o){o.when("/",{templateUrl:"views/login.html",controller:"LoginController"}).when("/login",{templateUrl:"views/login.html",controller:"LoginController"}).when("/sponzors/dashboard",{templateUrl:"scripts/sponzors-main/main.html",controller:"SponzorsEventMainController",controllerAs:"semc"}).when("/sponzors/outstanding",{templateUrl:"scripts/sponzors-outstanding/outstanding.html",controller:"SponzorsEventMainController",controllerAs:"semc"}).when("/sponzors/saved",{templateUrl:"scripts/sponzors-saved/saved.html",controller:"SponzorsEventMainController",controllerAs:"semc"}).when("/sponzors/settings/profile",{templateUrl:"scripts/sponzors-settings/profile.html",controller:"SponzorsProfileController",controllerAs:"spc"}).when("/sponzors/settings/preferences",{templateUrl:"scripts/sponzors-settings/preferences.html",controller:"SponzorsPreferencesController",controllerAs:"spc"}).when("/sponzors/settings/ratings",{templateUrl:"scripts/sponzors-settings/ratings.html",controller:"SponzorsRatingsController",controllerAs:"src"}).when("/sponzors/sponzoring",{templateUrl:"scripts/sponzors-sponzoring/sponzorships.html",controller:"SponzorsSponzorshipsController",controllerAs:"ssc"}).when("/sponzors/sponzoring/:id",{templateUrl:"scripts/sponzors-sponzoring/sponzorshipsId.html",controller:"SponzorsSponzorshipsController",controllerAs:"ssc"}).when("/sponzors/tasks",{templateUrl:"scripts/sponzors-tasks/tasks.html",controller:"SponzorsTasksController",controllerAs:"stc"}).when("/sponzors/task/:id",{templateUrl:"scripts/sponzors-tasks/taskId.html",controller:"SponzorsTasksController",controllerAs:"stc"}).when("/sponzors/tasks/create",{templateUrl:"scripts/sponzors-tasks/tasks_create.html",controller:"SponzorsCreateTasksController",controllerAs:"sctc"}).when("/sponzors/notifications",{templateUrl:"scripts/sponzors-notifications/notifications.html",controller:"SponzorsNotificationsController",controllerAs:"snc"}).when("/sponzors/notifications/importants",{templateUrl:"scripts/sponzors-notifications/importants.html",controller:"SponzorsNotificationsController",controllerAs:"snc"}).when("/sponzors/notifications/readed",{templateUrl:"scripts/sponzors-notifications/readed.html",controller:"SponzorsNotificationsController",controllerAs:"snc"}).when("/sponzors/notification/:id",{templateUrl:"scripts/sponzors-notifications/detail.html",controller:"SponzorsNotificationsController",controllerAs:"snc"}).when("/sponzors/event/:eventId",{templateUrl:"scripts/sponzors-event/event.html",controller:"SponzorsEventController",controllerAs:"sec"}).when("/sponzors/invite",{templateUrl:"scripts/sponzors-invite/invite.html",controller:"SponzorsInviteController",controllerAs:"sic"}).when("/sponzors/chat/sponzorship/:sponzorshipId",{templateUrl:"scripts/sponzors-chat/chat.html",controller:"SponzorsChatController",controllerAs:"scc"}).when("/sponzors/rate/sponzorship/:sponzorshipId",{templateUrl:"scripts/sponzors-rate/rate-form.html",controller:"SponzorsRateController",controllerAs:"src"}).when("/organizers/dashboard",{templateUrl:"scripts/organizers-main/main.html",controller:"OrganizersMainController",controllerAs:"omc"}).when("/organizers/sponzors",{templateUrl:"scripts/organizers-sponzors/sponzors.html",controller:"OrganizersSponzorsController",controllerAs:"osc"}).otherwise({redirectTo:"/login"})}])}();
!function(){"use strict";angular.module("sponzorme").run(["$rootScope",function(E){E.getConstants=function(){var E=window.location.hostname;return E.indexOf("localhost")>-1?{URL:"http://local.api.com/",XOOMRATE:parseFloat(4.99),FEE:parseFloat(.1),PAYPALCOMPLETERETURNURL:"http://www.sponzor.me/thank-you/",PAYPALIPNRETURNURL:"http://apilocal.sponzor.me/ipn",PAYPALEMAIL:"bussines@sponzor.me",FURL:"https://sponzorme.firebaseio.com/localhost/",AMAZONSECRET:"RlzqEBFUlJW/8YGkeasfmTZRLTlWMWwaBpJNBxu6",AMAZONKEY:"AKIAJDGUKWK3H7SJZKSQ",AMAZONBUCKET:"sponzormewebappimages",PAYPALSANDBOX:!0,EVENTBRITECLIENTSECRET:"QNC7CUESEQ67AA3WST4UWHFRAFNQ5J6RELHQVHBIPY2QCHY5DZ",EVENTBRITEAPYKEY:"BI5D6XQVDCIPGOKY4U",MEETUPAPIKEY:"9pfi8r66lr4da194pc1lvhclq7",MEETUPREDIRECTURL:"https://apilocal.sponzor.me/accept/meetup",AMAZONBUCKETREGION:"us-west-2",AMAZONBUCKETURL:"https://s3-us-west-2.amazonaws.com/sponzormewebappimages/",EVENTEXPIRATIONDAYS:"2"}:E.indexOf("staging")>-1?{URL:"https://apistaging.sponzor.me/",XOOMRATE:parseFloat(4.99),FEE:parseFloat(.1),PAYPALCOMPLETERETURNURL:"http://www.sponzor.me/thank-you/",PAYPALIPNRETURNURL:"http://apistaging.sponzor.me/ipn",PAYPALEMAIL:"bussines@sponzor.me",FURL:"https://sponzorme.firebaseio.com/staging/",AMAZONSECRET:"RlzqEBFUlJW/8YGkeasfmTZRLTlWMWwaBpJNBxu6",AMAZONKEY:"AKIAJDGUKWK3H7SJZKSQ",AMAZONBUCKET:"sponzormewebappimages",PAYPALSANDBOX:!0,EVENTBRITECLIENTSECRET:"REYYYTW7MW4ABJUI275V3JESPWRR55E5OLKTVC63VNXWFL4WLB",EVENTBRITEAPYKEY:"6WILTRRV7HVLBSRSGP",MEETUPAPIKEY:"scqnorvk4o3utc3k19qfj45vng",MEETUPREDIRECTURL:"https://apistaging.sponzor.me/accept/meetup",AMAZONBUCKETREGION:"us-west-2",AMAZONBUCKETURL:"https://s3-us-west-2.amazonaws.com/sponzormewebappimages/",EVENTEXPIRATIONDAYS:"2"}:E.indexOf("app")>-1?{URL:"https://api.sponzor.me/",XOOMRATE:parseFloat(4.99),FEE:parseFloat(.1),PAYPALCOMPLETERETURNURL:"http://www.sponzor.me/thank-you/",PAYPALIPNRETURNURL:"https://api.sponzor.me/ipn",PAYPALEMAIL:"ing.carlosandresrojas@gmail.com",FURL:"https://sponzorme.firebaseio.com/production/",AMAZONSECRET:"RlzqEBFUlJW/8YGkeasfmTZRLTlWMWwaBpJNBxu6",AMAZONKEY:"AKIAJDGUKWK3H7SJZKSQ",AMAZONBUCKET:"sponzormewebappimages",PAYPALSANDBOX:!1,EVENTBRITECLIENTSECRET:"V72EKSC2YWR5Y4XKVKCUL4W45ZAAVXJSEG3KOBAFIVKR6ESIX5",EVENTBRITEAPYKEY:"MI3YNPLR3R73AD36YS",MEETUPAPIKEY:"lc876qakj5itnsnebm3dijus12",MEETUPREDIRECTURL:"https://api.sponzor.me/accept/meetup",AMAZONBUCKETREGION:"us-west-2",AMAZONBUCKETURL:"https://s3-us-west-2.amazonaws.com/sponzormewebappimages/",EVENTEXPIRATIONDAYS:"2"}:void 0}}])}();
!function(){"use strict";angular.module("sponzorme").run(["$rootScope","$translate","$location","allInterestsServiceRequest","$filter","$localStorage","userRequest","ngDialog","$firebaseArray",function(e,t,n,a,r,o,i,u,s,c){var l=window.location.href;if("http:"===window.location.protocol&&l.indexOf("localhost")<=-1){var f=l.replace("http:","https:");window.location.href=f}e.sendFirebaseNotification=function(t,n){t.date=(new Date).getTime();var a=new Firebase(e.getConstants().FURL+"notifications/"+n),r=s(a);r.$add(t)},e.changeLanguage=function(e){t.use(e)},e.currentLanguage=function(){return t.use()},e.isExpiredData=function(){if(o.startDate){var e=new Date(o.startDate),t=parseInt(24*c*60*60*1e3),n=new Date(e.getTime()+t);return Date.now()>n.getTime()?(o.$reset(),!0):!1}return!0},e.getExtension=function(e){return/[.]/.exec(e)?/[^.]+$/.exec(e):void 0},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;8>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},e.userValidation=function(t){return l=window.location.href,e.isExpiredData(),o.email&&o.id>0&&o.token&&o.type===t&&o.user?(e.$storage=o,!0):(o.redirectTo=l,n.path("/login"),!1)}}])}();
!function(){"use strict";angular.module("sponzorme").directive("file",function(){return{restrict:"AE",scope:{file:"@"},link:function(r,i,e){i.bind("change",function(i){var e=i.target.files,a=e[0];r.file=a,r.$parent.file=a,r.$apply()})}}}).directive("logo",function(){return{restrict:"AE",scope:{file:"@"},link:function(r,i,e){i.bind("change",function(i){var e=i.target.files,a=e[0];r.logo=a,r.$parent.logo=a,r.$apply()})}}}).directive("stars",function(){return{restrict:"E",template:"<div></div>",link:function(r,i,e){var a,n=Math.floor(e.number),t=e.number-Math.floor(e.number);a=5>n?'<i class="material-icons orange600 md-12">star_border</i>':"",t>.48&&(a='<i class="material-icons orange600 md-12">star_half</i>');for(var o="",s="",l=0;5-n-1>l;l++)o+='<i class="material-icons orange600 md-12">star_border</i>';for(l=0;n>l;l++)s+='<i class="material-icons orange600 md-12">star_rate</i>';i.html('<span class="stars2">'+s+a+o+"</span>")},replace:!0}})}();
"use strict";!function(){function t(t,e){return{allCategories:function(){return t.get(e.getConstants().URL+"categories")}}}t.$inject=["$http","$rootScope"],angular.module("sponzorme").factory("categoryRequest",t)}();
"use strict";!function(){function t(t,e,n,o){var r=e.token;return{allEvents:function(){return t.get(o.getConstants().URL+"events")},oneEvent:function(e){return t.get(o.getConstants().URL+"events/"+e)},saveEvent:function(e,n){return t.get(o.getConstants().URL+"events/save/"+e+"/"+n)},saveRemoveEvent:function(e){return t.get(o.getConstants().URL+"events/remove_saved/"+e)},createEvent:function(e){return t({method:"POST",url:o.getConstants().URL+"events",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:n(e)})},createEventToken:function(e,r){return t({method:"POST",url:o.getConstants().URL+"events",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:n(e)})},deleteEvent:function(e){return t({method:"DELETE",url:o.getConstants().URL+"events/"+e,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r}})},editEventPut:function(e,a){return t({method:"PUT",url:o.getConstants().URL+"events/"+e,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:n(a)})}}}t.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("eventRequest",t)}();
"use strict";!function(){function t(t,e){return{allEventTypes:function(){return t.get(e.getConstants().URL+"event_types")}}}t.$inject=["$http","$rootScope"],angular.module("sponzorme").factory("eventTypeRequest",t)}();
"use strict";!function(){function t(t,e){return{allInterestsCategoriesId:function(){return t.get(e.getConstants().URL+"interests_category")}}}t.$inject=["$http","$rootScope"],angular.module("sponzorme").factory("allInterestsServiceRequest",t)}();
"use strict";!function(){function t(t,e,n){return{login:function(a){var o={email:a.email,password:a.password};return t({method:"POST",url:n.getConstants().URL+"auth",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e(o)})},resetPassword:function(a){var o={email:a};return t({method:"POST",url:n.getConstants().URL+"send_reset_password",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e(o)})},tryActivation:function(e){return t.get(n.getConstants().URL+"verify_activation/"+e)},resendActivation:function(a){var o={email:a};return t({method:"POST",url:n.getConstants().URL+"send_activation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e(o)})},updatePassword:function(a,o){return t({method:"POST",url:n.getConstants().URL+"update_password/"+a,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e(o)})},changePassword:function(a,o){return t({method:"POST",url:n.getConstants().URL+"change_password",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+o},data:e(a)})}}}t.$inject=["$http","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("loginRequest",t)}();
"use strict";!function(){function e(e,t,r,o){var n=t.token;return{createPerk:function(t){return e({method:"POST",url:o.getConstants().URL+"perks",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+n},data:r(t)})},deletePerk:function(t){return e({method:"DELETE",url:o.getConstants().URL+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+n}})}}}e.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("perkRequest",e)}();
"use strict";!function(){function t(t,e,r,o){var a=e.token;return{createPerkTask:function(e){return t({method:"POST",url:o.getConstants().URL+"perk_tasks",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a},data:r(e)})},deletePerkTask:function(e){return t({method:"DELETE",url:o.getConstants().URL+"perk_tasks/"+e,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a}})}}}t.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("perkTaskRequest",t)}();
"use strict";!function(){function o(o,t,n,e){var r=t.token;return{oneSponzorship:function(t){return o.get(e.getConstants().URL+"sponzorships/"+t)},createSponzorship:function(t){return o({method:"POST",url:e.getConstants().URL+"sponzorships",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:n(t)})},createSponzorshipToken:function(t,r){return o({method:"POST",url:e.getConstants().URL+"sponzorships",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:n(t)})},deleteSponzorship:function(t){return o({method:"DELETE",url:e.getConstants().URL+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r}})},editSponzorshipPatch:function(t,i){return o({method:"PATCH",url:e.getConstants().URL+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:n(i)})}}}o.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("sponzorshipRequest",o)}();
"use strict";!function(){function t(t,o,e,n){var r=o.token;return{createTaskSponzor:function(o){return t({method:"POST",url:n.getConstants().URL+"task_sponzor",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:e(o)})},deleteTaskSponzor:function(o){return t({method:"DELETE",url:n.getConstants().URL+"task_sponzor/"+o,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r}})},editTaskSponzorPatch:function(o,a){return t({method:"PATCH",url:n.getConstants().URL+"task_sponzor/"+o,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:e(a)})}}}t.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("taskSponzorRequest",t)}();
"use strict";!function(){function e(e,t,r,n){var o=t.token;return{createUserInterest:function(t){return e({method:"POST",url:n.getConstants().URL+"user_interests",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+o},data:r(t)})},bulkUserInterest:function(t){return e({method:"PUT",url:n.getConstants().URL+"user_interests/1",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+o},data:r(t)})},deleteUserInterest:function(t){return e({method:"DELETE",url:n.getConstants().URL+"user_interests/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+o}})}}}e.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("userInterestRequest",e)}();
"use strict";!function(){function t(t,e,n,o){return{oneUser:function(n){var r=e.token;return t.defaults.headers.common.Authorization="Basic "+r,t.get(o.getConstants().URL+"users/"+n)},home:function(n){var r=e.token;return t.defaults.headers.common.Authorization="Basic "+r,t.get(o.getConstants().URL+"home/"+n)},createUser:function(e){var r="b3JnYW5pemVyQHNwb256b3IubWU6c3Bvbnpvcm1l";return t({method:"POST",url:o.getConstants().URL+"users",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+r},data:n(e)})},editUserPatch:function(r,a){var i=e.token;return t({method:"PATCH",url:o.getConstants().URL+"users/"+r,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+i},data:n(a)})},invitedUser:function(r){var a=e.token;return t({method:"POST",url:o.getConstants().URL+"invite_friend/",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a},data:n(r)})}}}t.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("userRequest",t)}();
"use strict";!function(){function e(e){return{rss:function(o){var s="//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=JSON_CALLBACK&q=http://blog"+o+".sponzor.me/feeds/posts/default";return e.jsonp(s)}}}e.$inject=["$http"],angular.module("sponzorme").factory("rssRequest",e)}();
"use strict";!function(){function t(t,n,r,e){var o=n.token;return{ratingsBySponzor:function(n){return t.get(e.getConstants().URL+"ratings/sponzor/"+n)},ratingsByOrganizer:function(n){return t.get(e.getConstants().URL+"ratings/organizer/"+n)},createRating:function(n){return t({method:"POST",url:e.getConstants().URL+"ratings",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+o},data:r(n)})}}}t.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("ratingRequest",t)}();
"use strict";!function(){function e(e,t,n,r){return{getEventbriteAuth:function(t){return e.get(r.getConstants().URL+"token/eventbrite/"+t)},getMeetupAuth:function(t){return e.get(r.getConstants().URL+"token/meetup/"+t)},getEventbriteEvents:function(t){var n={headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+t}};return e.get("https://www.eventbriteapi.com/v3/users/me/owned_events/?token="+t,n)},getMeetupGroups:function(t){return e.get(r.getConstants().URL+"events/meetup/"+t)},getEventbriteEvent:function(t,n){var r={headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+n}};return e.get(t+"?token="+n,r)}}}e.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$rootScope"],angular.module("sponzorme").factory("eventbriteRequest",e)}();
"use strict";!function(){function t(t,e,o,s,n,r){return{showDemo:function(t,e){var i=introJs(),a=[];if("1"===e)for(var u=1;s+1>u;u++)a.push({element:"#step"+u,intro:o.instant("IntroSponzors.step"+u)});else for(var p=1;s+1>p;p++)a.push({element:"#step"+p,intro:o.instant("IntroOrganizers.step"+p)});i.setOption("tooltipPosition","auto"),i.setOptions({steps:a}),i.start();var c={demo:"1"};n.editUserPatch(t,c).success(function(){}),r.demo=1}}}t.$inject=["$http","$rootScope","$translate","DEMOSTEPS","userRequest","$localStorage"],angular.module("sponzorme").factory("demoRequest",t)}();
!function(){"use strict";function e(e){return{showLoading:function(){var o=angular.element(document.body);e.show({parent:o,templateUrl:"views/templates/loadingDialog.html"})},showDialog:function(o,t,a){function l(e,o,t,a,l){e.message=t,e.redirect=a,e.closeDialog=function(){o.hide(),a&&l.path(a)}}l.$inject=["$scope","$mdDialog","message","redirect","$location"],console.log(t);var n=angular.element(document.body);if("error"===o)var i="views/templates/errorDialog.html";else if("success"===o)var i="views/templates/successDialog.html";e.show({parent:n,templateUrl:i,locals:{message:t,redirect:a},controller:l})},closeLoading:function(){e.hide(),e.cancel()}}}e.$inject=["$mdDialog"],angular.module("sponzorme").factory("dialogRequest",e)}();
"use strict";!function(){function e(e,o,n,s,r,t){if(n.userValidation("1")){var i=this;i.user=JSON.parse(o.user),i.saveEvent=function(e){var n=i.user.saved_events.filter(function(o){return o.event.id===e?o:void 0});n.length?t.showDialog("error","alreadySaved",!1):(t.showLoading(),s.saveEvent(e,o.id).then(function(e){console.log(e),i.user.saved_events.push(e.data.event),o.user=JSON.stringify(i.user),t.closeLoading(),r.path("/sponzors/saved")},function(e){console.log(response),t.closeLoading(),t.showDialog("error","invalidEvent",!1)}))},i.saveRemoveEvent=function(e,n){t.showLoading(),s.saveRemoveEvent(e).then(function(e){i.user.saved_events.splice(n,1),o.user=JSON.stringify(i.user),t.closeLoading(),t.showDialog("success","removeSuccessfully","/sponzors/dashboard")},function(e){t.closeLoading(),t.showDialog("error","invalidEvent",!1)})}}}e.$inject=["$scope","$localStorage","$rootScope","eventRequest","$location","dialogRequest"],angular.module("sponzorme").controller("SponzorsEventMainController",e)}();
!function(){"use strict";function e(e,t,n,r){if(n.userValidation("1")){var i=this;i.events=[],i.filter=[],i.user=JSON.parse(t.user);var s;i.filterEvents=function(){i.events=[],i.events=s.filter(function(e){for(var t=0;t<i.filter.length;t++)if(e.title.indexOf(i.filter[t])>-1||e.description.indexOf(i.filter[t])>-1)return e})},i.filterClick=function(e){i.filter.push(e),i.filterEvents()},i.filterRemove=function(){i.filter.length?i.filterEvents():i.restoreEvents()},i.restoreEvents=function(){i.events=[],t.events&&(s=JSON.parse(t.events),i.events=JSON.parse(t.events))},i.restoreEvents()}}e.$inject=["$scope","$localStorage","$rootScope","dialogRequest"],angular.module("sponzorme").controller("SponzorsMainController",e)}();
function eventMenu(){function e(e,n,t){e.active=t.active,"save"===e.active&&(e.inSave=!0),e.openMenu=function(n,t){e.originatorEv=t,n(t)}}var n={link:e,templateUrl:"scripts/sponzors-main/event-menu.html",restrict:"EA"};return n}angular.module("sponzorme").directive("eventMenu",eventMenu);
function eventItem(){function e(e,t,n){e.active=n.active}var t={link:e,templateUrl:"scripts/sponzors-main/event-item.html",restrict:"EA"};return t}angular.module("sponzorme").directive("eventItem",eventItem);
function navbarEvents(){function n(n,e,t){n.active=t.active,n.openSidenavLeft=function(){$mdSidenav("left").toggle()},n.isOpenLeft=function(){var n=!0;return n=$mdSidenav("left").isOpen()},n.openMenu=function(e,t){n.originatorEv=t,e(t)}}var e={link:n,templateUrl:"scripts/sponzors-main/navbar.html",restrict:"EA"};return e}angular.module("sponzorme").directive("navbarEvents",navbarEvents);
function sponzorsNavbar(){function r(r,a,n){}var a={link:r,templateUrl:"scripts/sponzors-navbar/navbar-icons.html",restrict:"EA",replace:!0};return a}angular.module("sponzorme").directive("sponzorsNavbar",sponzorsNavbar);
"use strict";!function(){function e(e,t,o,n,r,s){if(o.userValidation("1")){var i=this;console.log(i.user),i.restoreEvents=function(){if(i.events=[],t.events){var e=JSON.parse(t.events);i.events=e.filter(function(e){return"1"===e.outstanding?e:void 0})}},i.restoreEvents()}}e.$inject=["$scope","$localStorage","$rootScope","eventRequest","$location","dialogRequest"],angular.module("sponzorme").controller("SponzorsOutstandingController",e)}();
!function(){"use strict";function e(e,o,n){if(n.userValidation("1")){var t=this;t.user=JSON.parse(o.user),t.events=[],t.user.saved_events.filter(function(e){e.event.saved_id=e.id,t.events.push(e.event)})}}e.$inject=["$scope","$localStorage","$rootScope"],angular.module("sponzorme").controller("SponzorsSavedController",e)}();
!function(){"use strict";function e(e,t,n,s,r,i,o,u,c,a){if(r.userValidation("1")){var l=this;l.user=JSON.parse(s.user),l.getAllInterests=function(){c.allInterestsCategoriesId().then(function(e){l.interests=e.data.InterestCategory},function(e){l.noInterestsLoaded=!0})},l.file=!1,l.updateDetails=function(){if(a.showLoading(),l.file){AWS.config.update({accessKeyId:r.getConstants().AMAZONKEY,secretAccessKey:r.getConstants().AMAZONSECRET}),AWS.config.region=r.getConstants().AMAZONBUCKETREGION;var t=new AWS.S3({params:{Bucket:r.getConstants().AMAZONBUCKET}}),i=btoa(r.uniqueString()+(new Date).getTime()+r.uniqueString()).replace("=",r.uniqueString())+"."+r.getExtension(l.file.name),o={Key:i,ContentType:l.file.type,Body:l.file,ServerSideEncryption:"AES256"};t.putObject(o,function(t,o){t||(l.user.logo=r.getConstants().AMAZONBUCKETURL+i,e.$digest(),n.editUserPatch(s.id,l.user).success(function(e){l.user=e.User,l.file=!1,a.closeLoading(),a.showDialog("success","dialog.accountInfoEditedSuccessfuly",!1)}).error(function(e){a.closeLoading(),a.showDialog("error","dialog.errorEditingAccountInfo",!1)}))})}else n.editUserPatch(s.id,l.user).then(function(e){s.user=JSON.stringify(l.user),l.file=!1,a.closeLoading(),a.showDialog("success","accountInfoEditedSuccessfuly",!1)},function(){a.closeLoading(),a.showDialog("error","errorEditingAccountInfo",!1)})},l.querySearch=function(e){return l.interests.filter(function(t){return t.name.indexOf(e)>-1?t:void 0})},l.removeUserInterest=function(e,t){l.user.interests.splice(e,1),o.deleteUserInterest(t).then(function(e){s.user=JSON.stringify(l.user)})},l.addUserInterests=function(e){if(e&&e.name){var t=!1;if(l.user.interests)for(var n=0;n<l.user.interests.length;n++)if(l.user.interests[n].interest_id===e.id_interest){t=!0;break}if(!t){var r={user_id:s.id,interest_id:e.id_interest};a.showLoading(),o.createUserInterest(r).then(function(e){l.user.interests.push(e.data.UserInterest),s.user=JSON.stringify(l.user),a.closeLoading()},function(e){a.closeLoading(),a.showDialog("error","invalidInterestSelection",!1)})}}else a.showDialog("error","invalidInterestSelection",!1)},l.getAllInterests(),l.newItem=""}}e.$inject=["$scope","$translate","userRequest","$localStorage","$rootScope","loginRequest","userInterestRequest","$log","allInterestsServiceRequest","dialogRequest"],angular.module("sponzorme").controller("SponzorsPreferencesController",e)}();
!function(){"use strict";function e(e,o,t,s,n,i,r,a){if(n.userValidation("1")){var c=this;c.user=JSON.parse(s.user),console.log(c.user),c.file=!1,c.editAccount=function(){if(a.showLoading(),c.user.location!==c.locationUser&&(c.user.location=c.locationUser.formatted_address,c.user.location_reference=c.locationUser.place_id),c.file){AWS.config.update({accessKeyId:n.getConstants().AMAZONKEY,secretAccessKey:n.getConstants().AMAZONSECRET}),AWS.config.region=n.getConstants().AMAZONBUCKETREGION;var e=new AWS.S3({params:{Bucket:n.getConstants().AMAZONBUCKET}}),o=btoa(n.uniqueString()+(new Date).getTime()+n.uniqueString()).replace("=",n.uniqueString())+"."+n.getExtension(c.file.name),i={Key:o,ContentType:c.file.type,Body:c.file,ServerSideEncryption:"AES256"};e.putObject(i,function(e,i){e||(s.image=n.getConstants().AMAZONBUCKETURL+o,c.user.image=n.getConstants().AMAZONBUCKETURL+o,c.user.name=c.user.firstName+" "+c.user.lastName,t.editUserPatch(s.id,c.user).then(function(e){s.user=JSON.stringify(c.user),c.file=!1,a.closeLoading(),a.showDialog("success","dialog.accountInfoEditedSuccessfuly",!1)},function(e){a.closeLoading(),a.showDialog("error","dialog.errorEditingAccountInfo",!1)}))})}else c.user.name=c.user.firstName+" "+c.user.lastName,t.editUserPatch(s.id,c.user).then(function(e){s.user=JSON.stringify(c.user),c.file=!1,a.closeLoading(),a.showDialog("success","dialog.accountInfoEditedSuccessfuly",!1)},function(e){a.closeLoading(),a.showDialog("error","dialog.errorEditingAccountInfo",!1)})}}}e.$inject=["$scope","$translate","userRequest","$localStorage","$rootScope","loginRequest","userInterestRequest","dialogRequest"],angular.module("sponzorme").controller("SponzorsProfileController",e)}();
!function(){"use strict";function o(o,r,e,n){if(e.userValidation("1")){var s=this;s.user=JSON.parse(r.user),console.log(s.user),s.ratings=[]}}o.$inject=["$scope","$localStorage","$rootScope","$log"],angular.module("sponzorme").controller("SponzorsRatingsController",o)}();
function navbarSettings(){function n(n,t,e){n.active=e.active,n.openSidenavLeft=function(){$mdSidenav("left").toggle()},n.isOpenLeft=function(){var n=!0;return n=$mdSidenav("left").isOpen()},n.openMenu=function(t,e){n.originatorEv=e,t(e)}}var t={link:n,templateUrl:"scripts/sponzors-settings/navbar.html",restrict:"EA"};return t}angular.module("sponzorme").directive("navbarSettings",navbarSettings);
!function(){"use strict";function o(o,s,a,r,n){if(a.userValidation("1")){var i=this;i.user=JSON.parse(s.user),i.resetPassword=function(){i.password===i.passwordConfirmation?(n.showLoading(),i.formData={email:s.email,password:i.password,password_confirmation:i.passwordConfirmation},r.changePassword(i.formData,s.token).then(function(o){n.closeLoading(),s.token=btoa(s.email+":"+i.passwordConfirmation),n.showDialog("success","dialog.passwordChangedSuccesfully",!1),i.password="",i.passwordConfirmation=""},function(){n.closeLoading(),n.showDialog("error","dialog.invalidNewPassword",!1)})):n.showDialog("error","dialog.passwordNoMatch",!1)}}}o.$inject=["$scope","$localStorage","$rootScope","loginRequest","dialogRequest"],angular.module("sponzorme").controller("SponzorsChangePasswordController",o)}();
!function(){"use strict";function s(s,r,e,o){if(e.userValidation("1")){var n=this;n.user=JSON.parse(r.user),n.regenerateTasks=function(){n.tasks=[];for(var s=0;s<n.user.sponzorships.length;s++)for(var r=0;r<n.user.sponzorships[s].task_sponzor.length;r++){var e=n.user.sponzorships[s].task_sponzor[r];e.event=n.user.sponzorships[s].event,n.tasks.push(e)}},n.regenerateTasks(),n.currentTaskIndex=o.id}}s.$inject=["$scope","$localStorage","$rootScope","$routeParams"],angular.module("sponzorme").controller("SponzorsTasksController",s)}();
!function(){"use strict";function s(s,o,e,r,i,d){if(i.userValidation("1")){var n=this;n.user=JSON.parse(o.user),n.addNextTask=function(s){if(n.sponzorshipsToAdd[s]>-1){var e=n.sponzorshipsToAdd[s];n.todo={type:1,status:0,perk_id:n.user.sponzorships[e].perk.id,event_id:n.user.sponzorships[e].event_id,sponzorship_id:n.user.sponzorships[e].id,user_id:o.id,organizer_id:n.user.sponzorships[e].organizer.id,sponzor_id:o.id,title:n.task.title,description:n.task.description},r.createTaskSponzor(n.todo).then(function(o){n.user.sponzorships[e].perk.tasks.push(o.data.PerkTask),n.user.sponzorships[e].task_sponzor.push(o.data.TaskSponzor),n.addNextTask(s+1)})}else d.closeLoading(),o.user=JSON.stringify(n.user),d.showDialog("success","dialog.taskAddedSuccessfuly","/sponzors/tasks")},n.addNewTask=function(){n.task.title&&n.task.description?(d.showLoading(),n.addNextTask(0)):d.showDialog("error","dialog.pleaseCompleteAllFields",!1)},n.changeSponzorship=function(s){n.sponzorshipsToAdd.indexOf(s)>-1?n.sponzorshipsToAdd.splice(n.sponzorshipsToAdd.indexOf(s)):n.sponzorshipsToAdd.push(s)},n.task={},n.sponzorshipsToAdd=[]}}s.$inject=["$scope","$localStorage","$routeParams","taskSponzorRequest","$rootScope","dialogRequest"],angular.module("sponzorme").controller("SponzorsCreateTasksController",s)}();
!function(){"use strict";function t(t,i,n,o,e,a,c,r,f){if(i.userValidation("1")){var s=this;c.id?(s.notificationRef=new Firebase(i.getConstants().FURL+"notifications/"+n.id+"/"+c.id),s.currentNotification=e(s.notificationRef),s.currentNotification.$loaded(function(){s.currentNotification.read=!0,s.currentNotification.$save()})):(s.notificationsRef=new Firebase(i.getConstants().FURL+"notifications/"+n.id),s.notifications=o(s.notificationsRef),s.notificationsRef.on("child_added",function(t){s.current=t.val(),n.lastUpdate<s.current.date&&a.home(n.id).then(function(t){n.lastUpdate=(new Date).getTime(),n.user=JSON.stringify(t.data.data.user)})})),s.markAsImportant=function(t){console.log(t),s.notificationRef=new Firebase(i.getConstants().FURL+"notifications/"+n.id+"/"+t),s.currentNotification=e(s.notificationRef),s.currentNotification.$loaded(function(){s.currentNotification.important=!0,s.currentNotification.$save()})},s["delete"]=function(t){s.notificationRef=new Firebase(i.getConstants().FURL+"notifications/"+n.id+"/"+t),s.currentNotification=e(s.notificationRef),s.currentNotification.$loaded(function(){s.currentNotification.$remove(),r.path("/sponzors/notifications")})}}}t.$inject=["$scope","$rootScope","$localStorage","$firebaseArray","$firebaseObject","userRequest","$routeParams","$location","dialogRequest"],angular.module("sponzorme").controller("SponzorsNotificationsController",t)}();
function navbarNotifications(){function n(n,i,t){n.active=t.active}function i(n){n.openMenu=function(i,t){n.originatorEv=t,i(t)}}var t={link:n,controller:i,templateUrl:"scripts/sponzors-notifications/navbar.html",restrict:"EA"};return t}angular.module("sponzorme").directive("navbarNotifications",navbarNotifications);
!function(){"use strict";function e(e,o,s,r,t,n,p,a){if(s.userValidation("1")){var l=this;l.todayDate=(new Date).getTime(),l.user=JSON.parse(o.user),l.statuses=t,n.id&&(l.currentSponzorship=l.user.sponzorships[n.id],l.currentSponzorship.event.ends=new Date(l.currentSponzorship.event.ends).getTime(),console.log(l.currentSponzorship)),l.downloadCalendar=function(o){e.starts=new Date(o.event.starts).toISOString().replace(":","").replace("-","").replace(".",""),e.ends=new Date(o.event.ends).toISOString().replace(":","").replace("-","").replace(".",""),e.ends=e.ends.replace(":","").replace("-","").replace(".","").replace("000Z",""),e.starts=e.starts.replace(":","").replace("-","").replace(".","").replace("000Z",""),e.currentSponzorship=o,a.show({templateUrl:"scripts/sponzors-sponzoring/add-calendar.html",controller:"SponzorsSponzorshipsController",controllerAs:"ssc",scope:e,preserveScope:!0,clickOutsideToClose:!0})},l.doPayment=function(o){e.PAYPALCOMPLETERETURNURL=s.getConstants().PAYPALCOMPLETERETURNURL,e.PAYPALIPNRETURNURL=s.getConstants().PAYPALIPNRETURNURL,e.SANDBOX=s.getConstants().PAYPALSANDBOX,e.PAYPALEMAIL=s.getConstants().PAYPALEMAIL,e.sponzorship=o,e.paymentValue=o.perk.usd,e.fee=parseFloat(o.perk.usd*s.getConstants().FEE+s.getConstants().XOOMRATE),e.paymentTotal=parseFloat(o.perk.usd)+parseFloat(e.fee),a.show({templateUrl:"scripts/sponzors-sponzoring/payment-info.html",controller:"SponzorsSponzorshipsController",controllerAs:"ssc",scope:e,preserveScope:!0,clickOutsideToClose:!0})},l.seeCause=function(o){e.cause=o.cause,e.status=o.status,a.show({templateUrl:"scripts/sponzors-sponzoring/cause-dialog.html",controller:"SponzorsSponzorshipsController",controllerAs:"ssc",scope:e,preserveScope:!0,clickOutsideToClose:!0})}}}e.$inject=["$scope","$localStorage","$rootScope","ratingRequest","SPONZORSHIPSTATUSES","$routeParams","ngDialog","$mdDialog"],angular.module("sponzorme").controller("SponzorsSponzorshipsController",e)}();
!function(){"use strict";function n(n){function e(e){function o(n,e){return n&&n.length?t(n.replace(/\n/g,"\\n"),e):n}function t(n,e){return e||(e=75),!n||n.length<=e?n:n.substring(0,e).replace(/\n/g,"\\n")+"\r\n "+t(n.substring(e),75)}var r=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","CLASS:PUBLIC","DESCRIPTION:"+o(n.currentSponzorship.event.description,62),"DTSTART:"+n.starts,"DTEND:"+n.ends,"LOCATION:"+o(n.currentSponzorship.event.location,64),"SUMMARY:"+o(n.currentSponzorship.event.title,66),"TRANSP:TRANSPARENT","END:VEVENT","END:VCALENDAR"];return r.join("\n")}function o(){var e="http://calendar.yahoo.com/?v=60&view=d&type=20";return e+="&title="+encodeURIComponent(n.currentSponzorship.event.title),e+="&st="+encodeURIComponent(n.starts)+"&et="+encodeURIComponent(n.ends),e+="&desc="+encodeURIComponent(n.currentSponzorship.event.description),e+="&in_loc="+encodeURIComponent(n.currentSponzorship.event.location)}function t(){var e="https://www.google.com/calendar/render?action=TEMPLATE";return e+="&text="+encodeURIComponent(n.currentSponzorship.event.title),e+="&dates="+encodeURIComponent(n.starts)+"/"+encodeURIComponent(n.ends),e+="&details="+encodeURIComponent(n.currentSponzorship.event.description),e+="&location="+encodeURIComponent(n.currentSponzorship.event.location)}function r(){var e="http://calendar.live.com/calendar/calendar.aspx?rru=addevent";return e+="&summary="+encodeURIComponent(n.currentSponzorship.event.title),e+="&dtstart="+encodeURIComponent(n.starts)+"&dtend="+encodeURIComponent(n.ends),e+="&description="+encodeURIComponent(n.currentSponzorship.event.description),e+="&location="+encodeURIComponent(n.currentSponzorship.event.location)}function c(){var o=n.currentSponzorship.event.title.replace(/[^\w ]+/g,"")+".ics";download(e(),o,"application/octet-stream")}n.currentSponzorship.event.description=n.currentSponzorship.event.description||"",n.calendarUrl={microsoft:r(),google:t(),yahoo:o(),icalendar:e(),dlIcal:c}}n.$inject=["$scope"],angular.module("sponzorme").controller("addCalendarController",n)}();
"use strict";!function(){function e(e,r,s,a,o,t,n,i,c,g,l,u,d){("en"===n.lang||"es"===n.lang||"pt"===n.lang)&&r.use(n.lang),e.doCreate=function(){void 0!==e.create.password||void 0!==e.create.password_confirmation?e.create.password===e.create.password_confirmation&&e.create.password_confirmation.length>6?(d.showLoading(),e.create.lang=i.currentLanguage(),e.create.type=1,e.create.name=e.create.firstname+" "+e.create.lastname,s.createUser(e.create).success(function(r){t.cookiesponzorme=btoa(e.create.email+":"+e.create.password),t.token=btoa(e.create.email+":"+e.create.password),t.typesponzorme=r.User.type,t.id=r.User.id,t.email=r.User.email,t.demo=r.User.demo,t.startDate=Date.now(),e.toggleCreateForm(),d.closeLoading()}).error(function(r){"Not inserted"===r.message&&(e.errorMessages=[],r.error.email&&("The email has already been taken."===r.error.email[0]?(e.errorMessages.push("errorEmailAlreadyTaken"),e.didYouForgotPassword=!0):e.errorMessages.push("errorRegisterEmail")),r.error.name&&e.errorMessages.push("errorRegisterName"),r.error.lastname&&e.errorMessages.push("errorRegisterLastname"),r.error.password&&e.errorMessages.push("errorRegisterPassword")),d.closeLoading(),a.open({template:"views/templates/multipleErrorDialog.html",showClose:!1,scope:e})})):e.passwordtwo.length>6?d.showDialog("error","errorRegisterPasswordNoMatch",!1):d.showDialog("error","errorRegisterShortPassword",!1):d.showDialog("error","errorRegisterPasswordNoEmpty",!1)},e.doCustomization=function(){d.showLoading(),e.create.location_reference="Fake",e.create.image="https://s3-us-west-2.amazonaws.com/sponzormewebappimages/user_default.jpg",s.editUserPatch(t.id,e.create).success(function(e){d.showDialog("success","success.registerCompleted","/login"),d.closeLoading()});for(var r=[],a=0;a<e.create.interests.length;a++){var o={user_id:t.id,interest_id:e.create.interests[a]};r.push(o)}var n={interests:r};u.bulkUserInterest(n).then(function(){})},l.allCategories().then(function(r){e.categories=r.data.categories},function(){e.categories=[]}),e.pages={firstPage:"",secondPage:"",thirdPage:""},e.submitSucces=function(){return!1},e.create={date:new Date,image:"",success:!1,age:""},e.firstPage=!0,e.toggleCreateForm=function(){e.firstPage===!0?e.firstPage=!1:e.firstPage=!0},e.ageRange=[];for(var m=c;g>m;m++)e.ageRange.push(m)}e.$inject=["$scope","$translate","userRequest","ngDialog","$location","$localStorage","$routeParams","$rootScope","MINAGE","MAXAGE","categoryRequest","userInterestRequest","dialogRequest"],angular.module("sponzorme").controller("SponzorsCreateController",e)}();
!function(){"use strict";function e(e,i,o,n,s,r){if(n.userValidation("1")){var t=this;t.friend={email:"",message:"no-message",user_id:s.id},t.inviteFriend=function(){r.showLoading(),o.invitedUser(t.friend).then(function(e){r.closeLoading(),r.showDialog("success","inviteFiendEmailSent",!1),t.friend={email:"",message:"no-message",user_id:s.id}},function(e){r.closeLoading(),r.showDialog("error","problem",!1)})}}}e.$inject=["$scope","$translate","userRequest","$rootScope","$localStorage","dialogRequest"],angular.module("sponzorme").controller("SponzorsInviteController",e)}();
"use strict";!function(){function o(o,e,r,n,s,t,i,a,c,p,u,l){var d=this;d.events=JSON.parse(t.events),d.currentEvent=d.events[n.eventId],d.formCreateSponzorship=function(e){o.newSponzorship={organizer_id:d.currentEvent.user_organizer.id,sponzor_id:t.id,event_id:d.currentEvent.id,perk_id:e.id,cause:"",status:0},r.show({templateUrl:"scripts/sponzors-event/create-sponzorship.html",controller:"SponzorsEventController",controllerAs:"sec",scope:o,clickOutsideToClose:!0})},d.createSponzorship=function(){l.closeLoading(),l.showLoading(),d.user=JSON.parse(t.user),d.user.sponzorships=d.user.sponzorships.filter(function(o){return"0"===o.status?o:void 0}),p.createSponzorship(o.newSponzorship).then(function(o){console.log("ok",o),d.user.sponzorships.push(o.data.Sponzorship),t.user=JSON.stringify(d.user),d.firebaseNotification={to:d.currentEvent.user_organizer.id,text:s.instant("NOTIFICATIONS.NewSponzorshipRequestfor")+d.currentEvent.title,link:"#/organizers/sponzors"},u.sendFirebaseNotification(firebaseNotification,d.currentEvent.user_organizer.id),l.closeLoading(),l.showDialog("success","sponzorshipCreatedSuccesfuly",!1)},function(o){console.log("err",o),l.closeLoading(),409===o.status?l.showDialog("error","alreadySponzoring",!1):l.showDialog("error","youCanNotSponzorThisEvent",!1)})}}o.$inject=["$scope","$mdSidenav","$mdDialog","$routeParams","$translate","$localStorage","$location","eventRequest","ngDialog","sponzorshipRequest","$rootScope","dialogRequest"],angular.module("sponzorme").controller("SponzorsEventController",o)}();
!function(){"use strict";function e(e,a,o,s,n,t,r){if(r.userValidation("1")){var i=this;t.oneSponzorship(n.sponzorshipId).then(function(e){i.sponzorshipInfo=e.data.data,e.data.data.Organizer.id===o.id?i.newMessage={author:e.data.data.Organizer.name,type:"#5DDECF",sponzorshipId:n.sponzorshipId}:e.data.data.Sponzor.id===o.id?i.newMessage={author:e.data.data.Sponzor.name,color:"#F6CECE",sponzorshipId:n.sponzorshipId}:s.path("/login")});var d=new Firebase(r.getConstants().FURL+"chat"),p=d.orderByChild("sponzorshipId").equalTo(n.sponzorshipId);i.chatMessages=a(p),i.addMessage=function(){i.newMessage.text&&(i.newMessage.userImage=o.image,i.newMessage.timedate=(new Date).getTime(),i.chatMessages.$add(i.newMessage),i.newMessage.text="")}}}e.$inject=["$scope","$firebaseArray","$localStorage","$location","$routeParams","sponzorshipRequest","$rootScope"],angular.module("sponzorme").controller("SponzorsChatController",e)}();
!function(){"use strict";function o(o,n,i,r,s,e,t,a,u,g){if(i.userValidation("1")){var p=this;p.user=JSON.parse(n.user),p.saveRating=function(){g.showLoading(),p.rating.other&&(p.rating.question5="Other: "+p.rating.other),r.createRating(p.rating).then(function(o){p.user.sponzorships[e.sponzorshipId].ratings.push(o.data.Rating),p.user.sponzorships[e.sponzorshipId].rated_sponzor=!0,n.user=JSON.stringify(p.user);var r={to:o.data.Rating.organizer_id,text:u.instant("NOTIFICATIONS.OrganizerRated")+p.user.name,link:"#/profile/"+o.data.Rating.organizer_id};i.sendFirebaseNotification(r,o.data.Rating.organizer_id),p.initForm(),g.closeLoading(),g.showDialog("success","organizerRateSuccesfuly","/sponzors/sponzoring"),console.log(o)},function(o){g.closeLoading(),g.showDialog("error","invalidRate",!1),console.log(o)})},p.initForm=function(){p.rating={organizer_id:p.currentSponzorship.organizer.id,sponzor_id:n.id,sponzorship_id:p.currentSponzorship.id,type:1,question0:"",question1:"",question2:"",question3:"",question4:"",question5:"",question6:"",question7:"",question8:"",question9:"",question10:""}},e.sponzorshipId&&(p.currentSponzorship=p.user.sponzorships[e.sponzorshipId],console.log(p.currentSponzorship),p.initForm())}}o.$inject=["$scope","$localStorage","$rootScope","ratingRequest","SPONZORSHIPSTATUSES","$routeParams","ngDialog","$mdDialog","$translate","dialogRequest"],angular.module("sponzorme").controller("SponzorsRateController",o)}();
"use strict";!function(){function e(e,n,t,o){if(o.userValidation("0")){var r=this;r.filterClick=function(e){r.filter.push(e)},r.openSidenavLeft=function(){$mdSidenav("left").toggle()},r.isOpenLeft=function(){var e=!0;return e=$mdSidenav("left").isOpen()},r.openMenu=function(e,n){r.originatorEv=n,e(n)},r.shareEvent=function(e){console.log("Let's Share the Event")},r.deleteEvent=function(e){console.log("Let's Delete Event")},r.user=JSON.parse(t.user),r.user.balance=0,angular.forEach(r.user.sponzorships_like_organizer,function(e){"1"===e.status&&(r.user.balance=parseInt(r.user.balance)+parseInt(e.perk.usd))})}}e.$inject=["$scope","$translate","$localStorage","$rootScope"],angular.module("sponzorme").controller("OrganizersMainController",e)}();
!function(){function e(){function e(e,a,n){e.active=n.active}var a={link:e,templateUrl:"scripts/organizers-main/head-nav.html",restrict:"EA",replace:!0};return a}angular.module("sponzorme").directive("headNav",e)}();
!function(){function e(){function e(e,n,r){}var n={link:e,templateUrl:"scripts/organizers-main/responsive-nav.html",restrict:"EA",replace:!0};return n}angular.module("sponzorme").directive("responsiveNav",e)}();
!function(){function r(){function r(r,n,a){}var n={link:r,templateUrl:"scripts/organizers-navbar/navbar-icons.html",restrict:"EA",replace:!0};return n}angular.module("sponzorme").directive("organizersNavbar",r)}();
"use strict";!function(){function o(o,r,s,n,i,e,t,p){if(e.userValidation("0")){var a=this;a.statuses=p,a.todayDate=(new Date).getTime(),a.user=JSON.parse(i.user),a.acceptSponzorship=function(o,s){a.user.sponzorships_like_organizer[s].loading=!0,a.currentSponzorshipId=o;var p={status:1};n.editSponzorshipPatch(o,p).then(function(o){a.user.sponzorships_like_organizer[s].task_sponzor=o.data.Sponzorship.task_sponzor,a.user.sponzorships_like_organizer[s].status=1,a.user.sponzorships_like_organizer[s].loading=!1,a.currentSponzorship=a.user.sponzorships_like_organizer[s],i.user=JSON.stringify(a.user),firebaseNotification={to:a.currentSponzorship.sponzor.id,text:r.instant("NOTIFICATIONS.SponzorshipAproved")+a.currentSponzorship.event.title+" - "+a.currentSponzorship.perk.kind,link:"#/sponzors/sponzoring"},e.sendFirebaseNotification(firebaseNotification,a.currentSponzorship.sponzor.id)},function(){a.user.sponzorships_like_organizer[s].loading=!1,t.showDialog("error","problem",!1)})},a.unacceptSponzorship=function(o,s){a.currentSponzorshipId=o,a.user.sponzorships_like_organizer[s].loading=!0;var p={status:0};n.editSponzorshipPatch(o,p).then(function(o){a.user.sponzorships_like_organizer[s].status=0,a.user.sponzorships_like_organizer[s].task_sponzor=o.data.Sponzorship.task_sponzor,a.user.sponzorships_like_organizer[s].loading=!1,a.currentSponzorship=a.user.sponzorships_like_organizer[s],i.user=JSON.stringify(a.user),firebaseNotification={to:a.currentSponzorship.sponzor.id,text:r.instant("NOTIFICATIONS.SponzorshipRejected")+a.currentSponzorship.event.title+" - "+a.currentSponzorship.perk.kind,link:"#/sponzors/sponzoring"},e.sendFirebaseNotification(firebaseNotification,a.currentSponzorship.sponzor.id)},function(o){a.user.sponzorships_like_organizer[s].loading=!1,t.showDialog("error","problem",!1)})},a.deleteSponzorship=function(o,s){t.showLoading(),a.currentSponzorship=a.user.sponzorships_like_organizer[s],n.deleteSponzorship(o).then(function(){firebaseNotification={to:a.currentSponzorship.sponzor.id,text:r.instant("NOTIFICATIONS.SponzorshipDeleted")+a.currentSponzorship.event.title+" - "+a.currentSponzorship.perk.kind,link:"#/sponzors/sponzoring"},e.sendFirebaseNotification(firebaseNotification,a.currentSponzorship.sponzor.id),a.user.sponzorships_like_organizer.splice(s,1),i.user=JSON.stringify(a.user),a.getTasks(a.user.sponzorships_like_organizer[0]),t.closeLoading(),t.showDialog("success","successDeletingSponzorship",!1)},function(){t.closeLoading(),t.showDialog("error","errorDeletingSponzorship",!1)})},a.changeStatus=function(o,n){a.currentSponzorship.task_sponzor[o].loading=!0;var p=a.currentSponzorship.task_sponzor[o].id,z={status:n};s.editTaskSponzorPatch(p,z).then(function(s){a.currentSponzorship.task_sponzor[o].loading=!1,a.currentSponzorship.task_sponzor[o].status=n,firebaseNotification={to:a.currentSponzorship.sponzor.id,text:r.instant("NOTIFICATIONS.TaskChanged1")+a.currentSponzorship.task_sponzor[o].task.title+r.instant("NOTIFICATIONS.TaskChanged2")+a.currentSponzorship.event.title+r.instant("NOTIFICATIONS.TaskChanged3"),link:"#/sponzors/sponzoring"},e.sendFirebaseNotification(firebaseNotification,a.currentSponzorship.sponzor.id),i.user=JSON.stringify(a.user)},function(){a.currentSponzorship.task_sponzor[o].loading=!1,t.showDialog("error","errorUpdatingTaskStatus",!1)})},a.seeCause=function(r){a.cause=r.cause,ngDialog.open({template:"views/templates/sponzorshipCauseDialog.html",showClose:!1,scope:o})}}}o.$inject=["$scope","$translate","taskSponzorRequest","sponzorshipRequest","$localStorage","$rootScope","dialogRequest","SPONZORSHIPSTATUSES"],angular.module("sponzorme").controller("OrganizersSponzorsController",o)}();
"use strict";!function(){function t(t,o,n,e){t.errorActivation=!1,t.successActivation=!1}t.$inject=["$scope","$routeParams","$translate","loginRequest"],angular.module("sponzorme").controller("ActivationController",t)}();
"use strict";!function(){function e(e,o,n,t,r,i,s,a,p,u,d){e.openSidenavLeft=function(){o("left").toggle()},e.isOpenLeft=function(){var e=!0;return e=o("left").isOpen()},e.openMenu=function(o,n){e.originatorEv=n,o(n)},e.hideValue=!1,e.toggle=function(){e.hideValue?e.hideValue=!1:e.hideValue=!0},e.eventLoaded=!1;var c;e.todayDate=(new Date).getTime(),s.oneEvent(n.eventId).then(function(o){e.eventLoaded=!0,e.currentEvent=o.data.event,e.currentEvent.starts=new Date(e.currentEvent.starts).getTime(),e.eventURL=i.absUrl()},function(){e.eventLoaded=!0}),"1"!==r.typesponzorme||u.isExpiredData()?"0"!==r.typesponzorme||u.isExpiredData()?(e.isSponzor=!1,e.isNoLogged=!0):(e.isSponzor=!1,e.isNoLogged=!1):(e.isSponzor=!0,e.isNoLogged=!1),e.sendToLogin=function(){r.redirectTo=e.eventURL,i.path("/login")},e.formCreateSponzorship=function(o){e.newSponzorship={organizer_id:e.currentEvent.user_organizer.id,sponzor_id:r.id,event_id:e.currentEvent.id,perk_id:o.id,cause:"",status:0},e.selectedPerk=o,a.open({template:"views/templates/formCreateSponzorship.html",scope:e})},e.createSponzorship=function(){d.closeLoading(),d.showLoading(),e.user=JSON.parse(r.user),e.user.pendingSponzorships=e.user.sponzorships.filter(function(e){return"0"===e.status?e:void 0}),p.createSponzorship(e.newSponzorship).then(function(o){e.user.sponzorships.push(o.data.Sponzorship),e.user.pendingSponzorships.push(o.data.Sponzorship),r.user=JSON.stringify(e.user),c={to:e.currentEvent.user_organizer.id,text:t.instant("NOTIFICATIONS.NewSponzorshipRequestfor")+e.currentEvent.title,link:"#/organizers/sponzors"},u.sendFirebaseNotification(c,e.currentEvent.user_organizer.id),d.closeLoading(),d.showDialog("success","sponzorshipCreatedSuccesfuly",!1)},function(e){d.closeLoading(),409===e.status?d.showDialog("error","alreadySponzoring",!1):d.showDialog("error","youCanNotSponzorThisEvent",!1)})}}e.$inject=["$scope","$mdSidenav","$routeParams","$translate","$localStorage","$location","eventRequest","ngDialog","sponzorshipRequest","$rootScope","dialogRequest"],angular.module("sponzorme").controller("EventPageController",e)}();
"use strict";!function(){function o(o,s,a,n,e,r){o.forgotPassword=function(){r.showLoading(),e.resetPassword(o.email).then(function(){r.closeLoading(),r.showDialog("success","PasswordResetLinkSent",!1)},function(){r.closeLoading(),r.showDialog("error","InvalidEmail",!1)})},o.resetPassword=function(){if(r.showLoading(),o.password===o.passwordConfirmation){var s={email:o.email,password:o.password,password_confirmation:o.passwordConfirmation};e.updatePassword(n.tokenReset,s).then(function(o){r.closeLoading(),r.showDialog("success","PasswordChangedSuccesfully","/login")},function(o){r.closeLoading(),r.showDialog("error","InvalidData",!1)})}else r.closeLoading(),r.showDialog("error","PasswordNoMatch",!1)}}o.$inject=["$scope","$rootScope","$translate","$routeParams","loginRequest","dialogRequest"],angular.module("sponzorme").controller("ForgotController",o)}();
"use strict";!function(){function t(t,o,n,e){t.errorActivation=!1,t.successActivation=!1}t.$inject=["$scope","$routeParams","$translate","loginRequest"],angular.module("sponzorme").controller("ActivationController",t)}();
"use strict";!function(){function o(o,a,e,r){"1"===e.typesponzorme?r.path("/sponzors/dashboard"):"0"===e.typesponzorme&&r.path("/organizers/dashboard"),o.fakeLogin={email:"",password:""}}o.$inject=["$scope","$translate","$localStorage","$location"],angular.module("sponzorme").controller("HomeController",o)}();
"use strict";!function(){function e(e,t,a,n,o,s,i,r,l){("en"===i.lang||"es"===i.lang||"pt"===i.lang)&&t.use(i.lang);var d=n.redirectTo;e.login={},e.doLogin=function(){e.login.email&&e.login.password&&(e.login.lang=r.currentLanguage(),s.showLoading(),a.login(e.login).then(function(a){if("1"===a.data.user.activated){var i=new Date;i.setDate(i.getDate()+1),n.type=a.data.user.type,n.token=btoa(e.login.email+":"+e.login.password),n.id=a.data.user.id,n.email=a.data.user.email,n.demo=a.data.user.demo,n.image=a.data.user.image,n.startDate=Date.now(),n.rating=a.data.rating,t.use(a.data.user.lang),n.lastUpdate=(new Date).getTime(),s.closeLoading(),a.data.user.sponzorships&&(a.data.user.sponzorships=a.data.user.sponzorships.filter(function(e){return e.event.starts=new Date(e.event.starts).getTime(),e})),a.data.user.events&&(a.data.user.events=a.data.user.events.filter(function(e){return e.starts=new Date(e.starts).getTime(),e}));var r=a.data.user.name.split(" ");if(a.data.user.firstName=r[0],a.data.user.lastName=r[1],n.user=JSON.stringify(a.data.user),n.events=[],e.$storage=n,a.data.events){var l=a.data.events.filter(function(e){return e.starts=new Date(e.starts).getTime(),e.ends=new Date(e.ends).getTime(),e});n.events=JSON.stringify(l)}"1"===a.data.user.type?d&&-1===d.indexOf("/#/login")&&d.indexOf("sponzors")>-1||d&&d.indexOf("/#/event/")>-1?window.location.href=d:o.path("/sponzors/dashboard"):d&&-1===d.indexOf("/#/login")&&d.indexOf("organizers")>-1||d&&d.indexOf("/#/event/")>-1?window.location.href=d:o.path("/organizers/dashboard")}else s.closeLoading(),ngDialog.open({template:"views/templates/unactivatedAccountDialog.html",showClose:!1})},function(){e.loagind=!1,s.closeLoading(),s.showDialog("error","dialog.invalidCredentials",!1)}))},e.tryActivation=function(){s.showLoading(),a.tryActivation(i.token).success(function(){s.closeLoading(),s.showDialog("success","dialog.activationSuccess",!1)}).error(function(){s.closeLoading(),ngDialog.open({template:"views/templates/errorActivationDialog.html",showClose:!1,scope:e})})},i.token&&e.tryActivation()}e.$inject=["$scope","$translate","loginRequest","$localStorage","$location","dialogRequest","$routeParams","$rootScope","userRequest"],angular.module("sponzorme").controller("LoginController",e)}();
"use strict";!function(){function o(o,t,e,l,n){n.tolsctive="active",l.$reset(),e.path("/login")}o.$inject=["$scope","$translate","$location","$localStorage","$rootScope"],angular.module("sponzorme").controller("LogoutController",o)}();
"use strict";!function(){function e(e,n,o,t){e.error_log=[],e.resend=function(){e.loagind=!0,o.resendActivation(e.email).success(function(){e.loagind=!1,e.error_log[0]="ActivationLinkResent",t.open({template:"templateId",scope:e})}).error(function(){e.error_log[0]="InvalidEmail",e.loagind=!1,t.open({template:"templateId",scope:e})})}}e.$inject=["$scope","$translate","loginRequest","ngDialog"],angular.module("sponzorme").controller("ResendController",e)}();
"use strict";!function(){function e(e,t,s,a,o,r,n,i,u,c){e.steps=[!1,!1,!1],e.startCustomization=function(){s.email&&s.id&&s.newUser?(e.userData={},e.categories=[],e.interestselectarray=[],e.email=s.email,e.id=s.id,e.newUser=s.newUser,e.showStep(0),r.allCategories().then(function(t){e.categories=t.data.categories},function(){e.categories=[]})):(s.$reset(),i.path("/"))},e.showStep=function(t){e.steps=[!1,!1,!1],e.steps[t]=!0},e.sendfrom=function(){c.showLoading(),e.objuser={},e.objuser.age=e.userData.age,e.objuser.sex=e.userData.sex,e.objuser.lang=e.userData.lang,e.objuser.location=e.userData.location.formatted_address,e.objuser.location_reference=e.userData.location.reference,e.objuser.image="https://s3-us-west-2.amazonaws.com/sponzormewebappimages/user_default.jpg",e.loagind=!0,a.editUserPatch(s.id,e.objuser).success(function(t){"Updated"===t.message&&e.showStep(1),c.closeLoading()})},e.showInterests=function(t){e.idselect=t},e.interestselect=function(t){var a=e.interestselectarray.indexOf(t);if(-1===a){var o={user_id:s.id,interest_id:t};e.interestselectarray.push(o)}else e.interestselectarray.splice(a,1)},e.submitCategoryInfo=function(){c.showLoading();var t={interests:e.interestselectarray};n.bulkUserInterest(t).then(function(t){c.closeLoading(),e.showStep(2)})},e.startCustomization()}e.$inject=["$scope","$translate","$localStorage","userRequest","allInterestsServiceRequest","categoryRequest","userInterestRequest","$location","$rootScope","dialogRequest"],angular.module("sponzorme").controller("CustomizationController",e)}();
"use strict";!function(){function s(s,i,n){var o=n.current.loadedTemplateUrl;console.log("This is the route:",o);var r={dashboard:["scripts/sponzors-main/main.html","scripts/sponzors-outstanding/outstanding.html","views/event.html"],sponzoring:["scripts/sponzors-sponzoring/sponzorships.html","scripts/sponzors-sponzoring/sponzorshipsId.html"],tasks:["scripts/sponzors-tasks/tasks.html","scripts/sponzors-tasks/taskId.html","scripts/sponzors-tasks/tasks_create.html"],notifications:["scripts/sponzors-notifications/notifications.html","scripts/sponzors-notifications/detail.html","scripts/sponzors-notifications/readed.html","scripts/sponzors-notifications/importants.html"],settings:["scripts/sponzors-settings/profile.html","scripts/sponzors-settings/preferences.html","scripts/sponzors-settings/ratings.html"],saved:["scripts/sponzors-saved/saved.html"]},t={dashboard:["views/organizers/dashboard/main.html","views/organizers/dashboard/add_event.html","views/event.html","views/organizers/dashboard/sponzorships.html","views/organizers/dashboard/historical.html","views/organizers/chat.html"],sponzoring:["views/organizers/dashboard/organizerships.html","views/organizers/dashboard/organizershipsId.html"],following:["views/organizers/dashboard/following.html"],news:["views/organizers/dashboard/news.html"],tasks:["views/organizers/dashboard/tasks/tasks.html","views/organizers/dashboard/tasks/taskId.html","views/organizers/dashboard/tasks/tasks_create.html"],notifications:["views/organizers/notifications/notifications.html","views/organizers/notifications/notification_detail.html","views/organizers/notifications/notification_reply.html","views/organizers/notifications/notifications_readed.html","views/organizers/notifications/notifications_importants.html"],settings:["views/organizers/dashboard/settings_profile.html","views/organizers/dashboard/settings_preferences.html","views/organizers/dashboard/settings_ratings.html"]};s.dashboard=function(s){if("organizers"===s){for(var i=0;i<t.dashboard.length;i++)if(t.dashboard[i]===o)return!0}else if("sponzors"===s)for(var i=0;i<r.dashboard.length;i++)if(r.dashboard[i]===o)return!0},s.sponzoring=function(s){if("organizers"===s){for(var i=0;i<t.sponzoring.length;i++)if(t.sponzoring[i]===o)return!0}else if("sponzors"===s)for(var i=0;i<r.sponzoring.length;i++)if(r.sponzoring[i]===o)return!0},s.following=function(s){if("organizers"===s){for(var i=0;i<t.following.length;i++)if(t.following[i]===o)return!0}else if("sponzors"===s)for(var i=0;i<r.following.length;i++)if(r.following[i]===o)return!0},s.news=function(s){if("organizers"===s){for(var i=0;i<t.news.length;i++)if(t.news[i]===o)return!0}else if("sponzors"===s)for(var i=0;i<r.news.length;i++)if(r.news[i]===o)return!0},s.tasks=function(s){if("organizers"===s){for(var i=0;i<t.tasks.length;i++)if(t.tasks[i]===o)return!0}else if("sponzors"===s)for(var i=0;i<r.tasks.length;i++)if(r.tasks[i]===o)return!0},s.notifications=function(s){if("organizers"===s){for(var i=0;i<t.notifications.length;i++)if(t.notifications[i]===o)return!0}else if("sponzors"===s)for(var i=0;i<r.notifications.length;i++)if(r.notifications[i]===o)return!0},s.settings=function(s){if("organizers"===s){for(var i=0;i<t.settings.length;i++)if(t.settings[i]===o)return!0}else if("sponzors"===s)for(var i=0;i<r.settings.length;i++)if(r.settings[i]===o)return!0},s.saved=function(s){if("organizers"===s){for(var i=0;i<t.saved.length;i++)if(t.saved[i]===o)return!0}else if("sponzors"===s)for(var i=0;i<r.saved.length;i++)if(r.saved[i]===o)return!0},s.openMenu=function(i,n){s.originatorEv=n,i(n)},s.openSidenavLeft=function(){i("left").toggle()},s.isOpenLeft=function(){var s=!0;return s=i("left").isOpen()}}s.$inject=["$scope","$mdSidenav","$route"],angular.module("sponzorme").controller("SidenavController",s)}();